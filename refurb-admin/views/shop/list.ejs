<%- include('../partials/head',   { title: (typeof title !== 'undefined' ? title : 'Shop') }) %>
<%- include('../partials/header', { active: (typeof active !== 'undefined' ? active : 'shop') }) %>

<h1>ðŸ’» Devices Available for Purchase</h1>
<p class="subtle">Certified devices ready for sale. Grades reflect cosmetic/functional quality.</p>

<% const _items = Array.isArray(items) ? items : []; %>

<% if (_items.length === 0) { %>
  <div class="card" style="margin-top:1rem;">
    <p class="muted">No devices are available right now. Please check back later.</p>
  </div>
<% } else { %>
  <div class="grid" style="margin-top:1rem;">
    <% _items.forEach(it => { %>
      <div class="card">
        <h3><%= (it.brand ? it.brand + ' ' : '') + it.model %></h3>
        <p class="muted">Grade: <strong><%= it.grade %></strong></p>
        <p class="price"><%= it.price != null ? ('$' + it.price) : 'â€”' %></p>

        <!-- Placeholder add-to-cart (wire up later if needed) -->
        <form method="post" action="/shop/add-to-cart">
          <input type="hidden" name="id" value="<%= it.id %>"/>
          <button class="btn primary" type="submit">Add to cart</button>
        </form>
      </div>
    <% }) %>
  </div>
<% } %>

<%- include('../partials/footer') %>
<%- include('../partials/end') %>

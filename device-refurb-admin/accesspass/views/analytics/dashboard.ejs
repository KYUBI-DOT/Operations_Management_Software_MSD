<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Analytics Dashboard</title>
  <link rel="stylesheet" href="/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Header partial -->
  <%- include("../partials/header.ejs") %>

  <main class="container">
    <h1>ðŸ“Š Analytics Dashboard</h1>

    <ul>
      <% metrics.forEach((m) => { %>
        <li><strong><%= m.metric %></strong>: <%= m.value %></li>
      <% }) %>
    </ul>

    <canvas id="analyticsChart" width="400" height="200"></canvas>
  </main>

  <!-- Footer partial -->
  <%- include("../partials/footer.ejs") %>

  <script>
    const ctx = document.getElementById("analyticsChart").getContext("2d");
    new Chart(ctx, {
      type: "bar",
      data: {
        labels: <%- JSON.stringify(metrics.map(m => m.metric)) %>,
        datasets: [{
          label: "Values",
          data: <%- JSON.stringify(metrics.map(m => m.value)) %>,
          backgroundColor: ["#4CAF50", "#2196F3", "#FF5722"]
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: true, position: "bottom" },
          title: { display: true, text: "AccessPass Metrics" }
        }
      }
    });
  </script>
</body>
</html>

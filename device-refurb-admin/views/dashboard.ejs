<%- include('../partials/header') %>

<h1>Admin Dashboard</h1>

<% if (authHint) { %>
  <p class="hint">For write actions during testing, append <code>?pass=<%= process.env.ADMIN_PASS %></code> to URLs.</p>
<% } %>

<section class="grid-4">
  <div class="card"><h3>Intake</h3><p><%= stats.intake %></p></div>
  <div class="card"><h3>Wiping</h3><p><%= stats.wiping %></p></div>
  <div class="card"><h3>Wiped</h3><p><%= stats.wiped %></p></div>
  <div class="card"><h3>Resold</h3><p><%= stats.resold %></p></div>
</section>

<h2>Recent</h2>
<table class="table">
  <thead><tr><th>ID</th><th>Serial</th><th>Model</th><th>Status</th><th>Grade</th><th>Price</th><th>Date</th></tr></thead>
  <tbody>
  <% (latest || []).forEach(r => { %>
    <tr>
      <td><%= r.id %></td>
      <td><%= r.serial %></td>
      <td><%= r.model %></td>
      <td><%= r.status %></td>
      <td><%= r.grade || '-' %></td>
      <td><%= r.price != null ? ('$' + r.price) : '-' %></td>
      <td><%= r.intake_date %></td>
    </tr>
  <% }) %>
  </tbody>
</table>

<%- include('../partials/footer') %>
